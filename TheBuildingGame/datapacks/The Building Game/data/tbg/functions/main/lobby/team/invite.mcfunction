#######
# Compiled from main/lobby/team/invite.mcscript
# to .//The Building Game/data/tbg/functions/main/lobby/team/invite.mcfunction
#
# Generated by Minecraft Script for 1.13
######
execute if score team_members options matches 0 run tellraw @s {"translate":"Teams are disabled","color":"red"}
execute unless score team_members options matches 0 if entity @s[team=!players] run tellraw @s {"translate":"You must join the players before creating a team","color":"red"}
execute unless score team_members options matches 0 unless entity @s[team=!players] if score @s p_id = @s invite run tellraw @s {"translate":"You cannot invite yourself!","color":"red"}
execute unless score team_members options matches 0 unless entity @s[team=!players] if score @s invite matches -2147483647 run tellraw @s {"translate":"Usage: %s","color":"red","with":[{"translate":"\/trigger invite set <ID>"}]}
execute unless score team_members options matches 0 unless entity @s[team=!players] unless score @s p_id = @s invite if score @s invite matches -2147483646.. run scoreboard players set #success tbg 1
execute unless score team_members options matches 0 unless entity @s[team=!players] unless score @s p_id = @s invite if score @s invite matches -2147483646.. if score @s team matches 1.. run function tbg:main/lobby/team/count_members
execute unless score team_members options matches 0 unless entity @s[team=!players] unless score @s p_id = @s invite if score @s invite matches -2147483646.. if score @s team matches 1.. if score team_members options matches 2.. if score #count_members team >= team_members options run scoreboard players set #success tbg 0
execute unless score team_members options matches 0 unless entity @s[team=!players] unless score @s p_id = @s invite if score @s invite matches -2147483646.. if score @s team matches 1.. if score team_members options matches 2.. if score #count_members team >= team_members options run tellraw @s {"translate":"Your team reached the maximum number of members","color":"red"}
execute unless score team_members options matches 0 unless entity @s[team=!players] unless score @s p_id = @s invite if score @s invite matches -2147483646.. if score #success tbg matches 1 run scoreboard players operation #var invite = @s invite
execute unless score team_members options matches 0 unless entity @s[team=!players] unless score @s p_id = @s invite if score @s invite matches -2147483646.. if score #success tbg matches 1 as @a if score @s p_id = #var invite run tag @s add tag
execute unless score team_members options matches 0 unless entity @s[team=!players] unless score @s p_id = @s invite if score @s invite matches -2147483646.. if score #success tbg matches 1 if entity @a[tag=tag] if score @a[tag=tag,limit=1] team = @s team run tellraw @s {"translate":"This player is already in your team","color":"red"}
execute unless score team_members options matches 0 unless entity @s[team=!players] unless score @s p_id = @s invite if score @s invite matches -2147483646.. if score #success tbg matches 1 if entity @a[tag=tag] if score @a[tag=tag,limit=1] team.invite = @s team run tellraw @s {"translate":"This player is already invited to your team","color":"red"}
execute unless score team_members options matches 0 unless entity @s[team=!players] unless score @s p_id = @s invite if score @s invite matches -2147483646.. if score #success tbg matches 1 if entity @a[tag=tag] unless score @a[tag=tag,limit=1] team = @s team unless score @a[tag=tag,limit=1] team.invite = @s team unless score @s team matches 1.. run function tbg:main/lobby/team/invite.create_team
execute unless score team_members options matches 0 unless entity @s[team=!players] unless score @s p_id = @s invite if score @s invite matches -2147483646.. if score #success tbg matches 1 if entity @a[tag=tag] unless score @a[tag=tag,limit=1] team = @s team unless score @a[tag=tag,limit=1] team.invite = @s team run tellraw @s [{"translate":"You invited "},{"selector":"@a[tag=tag]","color":"yellow"}]
execute unless score team_members options matches 0 unless entity @s[team=!players] unless score @s p_id = @s invite if score @s invite matches -2147483646.. if score #success tbg matches 1 if entity @a[tag=tag] unless score @a[tag=tag,limit=1] team = @s team unless score @a[tag=tag,limit=1] team.invite = @s team run tellraw @a[tag=tag] ["",{"selector":"@s","color":"yellow"},{"translate":" is inviting you to the team"}," ",{"translate":"[Accept]","color":"gold","clickEvent":{"action":"run_command","value":"/trigger accept"},"hoverEvent":{"action":"show_text","value":{"translate":"Accept the last invitation","color":"gold"}}}]
execute unless score team_members options matches 0 unless entity @s[team=!players] unless score @s p_id = @s invite if score @s invite matches -2147483646.. if score #success tbg matches 1 if entity @a[tag=tag] unless score @a[tag=tag,limit=1] team = @s team unless score @a[tag=tag,limit=1] team.invite = @s team run scoreboard players operation @a[tag=tag] team.invite = @s team
execute unless score team_members options matches 0 unless entity @s[team=!players] unless score @s p_id = @s invite if score @s invite matches -2147483646.. if score #success tbg matches 1 unless entity @a[tag=tag] run tellraw @s {"translate":"No player was found","color":"red"}
execute unless score team_members options matches 0 unless entity @s[team=!players] unless score @s p_id = @s invite if score @s invite matches -2147483646.. if score #success tbg matches 1 run tag @a remove tag
scoreboard players set @s invite -2147483648
